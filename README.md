# kource_work
# OrientDB –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

## ‚ú® –û–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OrientDB –Ω–∞ –Ω–∞–∏–º–µ–Ω–µ–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –∏–∑ —Ç—Ä—ë—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö Linux-–º–∞—à–∏–Ω (ALT Linux, Astra Linux –∏ RedOS). –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Ansible –∏ Bash, —Å —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º —Ä–æ–ª–µ–π –Ω–∞:

- **router** (—Å–∞–º—ã–π –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ö–æ—Å—Ç)
- **app** (–Ω–∞–∏–º–µ–Ω–µ–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π, –∑–¥–µ—Å—å –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –±–∞–∑–∞ OrientDB)
- **client** (–æ—Å—Ç–∞–≤—à–∏–π—Å—è, —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)

–î–æ—Å—Ç—É–ø –∫ OrientDB —Ä–∞–∑—Ä–µ—à—ë–Ω —Ç–æ–ª—å–∫–æ —Å –∫–ª–∏–µ–Ω—Ç–∞. –í—ã—Ö–æ–¥ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —É –≤—Å–µ—Ö ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ router.

---

## ‚öôÔ∏è –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. üë®‚Äçüíª –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã
–°–æ–∑–¥–∞–π—Ç–µ 3 –º–∞—à–∏–Ω—ã:

| OS          | –ü—Ä–∏–º–µ—Ä —Ö–æ—Å—Ç–∞     |
|-------------|------------------|
| ALT Linux   | `alt.local`      |
| Astra Linux | `astra.local`    |
| RedOS       | `redos.local`    |

–ù–∞ –∫–∞–∂–¥–æ–π:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ansible –∏ Bash
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **–æ–¥–∏–Ω bridge-—Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
- –û–±–µ—Å–ø–µ—á—å—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ SSH –±–µ–∑ –ø–∞—Ä–æ–ª—è (—á–µ—Ä–µ–∑ –∫–ª—é—á–∏)

### 2. ‚öñÔ∏è SSH-–¥–æ—Å—Ç—É–ø
–ù–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—â–µ–π –º–∞—à–∏–Ω–µ:

```bash
ssh-copy-id root@<ip_alt>
ssh-copy-id root@<ip_astra>
ssh-copy-id root@<ip_redos>
```

### 3. üîé –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ IP (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
–õ—É—á—à–µ –∑–∞–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é IP-–∞–¥—Ä–µ—Å–∞ –∫–∞–∂–¥–æ–π –í–ú –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ iptables.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
project/
‚îú‚îÄ‚îÄ deploy-docker.yml         # –æ—Å–Ω–æ–≤–Ω–æ–π Ansible playbook
‚îú‚îÄ‚îÄ inventory.ini             # –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –º–∞—à–∏–Ω
‚îú‚îÄ‚îÄ deploy.sh                 # —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
```
–ó–∞–ø—É—Å–∫

```bash
chmod +x deploy.sh
./deploy.sh
```

–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç:
1. –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∑–∞–≥—Ä—É–∑–∫–∏
2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π (router/app/client)
3. –ù–∞—Å—Ç—Ä–æ–π–∫—É NAT –Ω–∞ router –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
4. –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ OrientDB —á–µ—Ä–µ–∑ Docker –Ω–∞ app
5. –ù–∞—Å—Ç—Ä–æ–π–∫—É —Ñ–∞–µ—Ä–≤–æ–ª–∞ (iptables)
6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞

- `iptables` –Ω–∞ `app` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç—É `2480` **—Ç–æ–ª—å–∫–æ —Å –∫–ª–∏–µ–Ω—Ç–∞**
- –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî `DROP`
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `router`

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞
–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è:

```bash
curl -i http://orientdb.local:2480
```

–ï—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤–µ—Ä–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ `HTTP/1.1 401 Unauthorized` –æ—Ç OrientDB (—ç—Ç–æ —É—Å–ø–µ—Ö).

---

## üåê –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
  ```bash
  docker ps
  docker logs orientdb
  ```
- –ü—Ä–æ–≤–µ—Ä–∫–∞ iptables:
  ```bash
  iptables -L -n -v
  ```

---

## üìñ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- Ansible 2.10+
- Docker Engine (–Ω–∞ —Ü–µ–ª–µ–≤—ã—Ö —Ö–æ—Å—Ç–∞—Ö)
- –û–° —Å systemd –∏ iptables




